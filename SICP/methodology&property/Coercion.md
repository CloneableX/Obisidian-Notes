### 强制转换

在一个关于不同类型的通用算法系统中除了对同一种类型的数据进行计算外，还可能存在跨类型运算的情况，比如复数与整数的相加等。最简单的解决方法是按如下方式实现一个特殊的跨类型运算。

```scheme
(define (add-complex-to-schemenum z x)
  (make-from-real-imag (+ (real-part z) x) (imag-part z)))
(put 'add '(complex scheme-number)
     (lambda (z x) (tag (add-complex-to-shcemenum z x))))
```

虽然也可以在相应的类型安装包中加入特定的跨类型算法，但这样的方式无疑是在破坏整个系统的插拔性，也破坏了系统的模块化。因为这样的某对类型专有的特殊方法既可以添加在复数包中，也可以添加在整数包中，甚至可以添加在有理数包中。所以我们应该采用能够兼顾系统插拔性和模块化的方式处理跨类型运算，这种方式通常称为 **强制转换（coercion）**。

强制转换是通过将两种需要转换的类型和对应的转换程式注册在强制转换表中，然后根据对应的跨类型情况调用相应的类型转换程式，这部分功能只需要改造通用程式即可获得。而且原先的所有计算程式都不需要改变，因为转换后的跨类型运算会转变为两个同类型数据对象的运算。